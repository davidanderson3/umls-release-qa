<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UMLS Release QA</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="container">
    <h1>UMLS Release QA</h1>
    <div id="status"></div>
  </div>

  <script type="module">
    async function checkReleases() {
      const status = document.getElementById('status');
      try {
        const resp = await fetch('/api/releases');
        if (!resp.ok) {
          status.innerHTML = `<p style="color:red">Failed to check releases: ${resp.status}</p>`;
          return;
        }
        const { current, previous, releaseList } = await resp.json();
        if (current && previous) {
          status.innerHTML = `
            <p>Current release: <strong>${current}</strong></p>
            <p>Previous release: <strong>${previous}</strong></p>
            <p style="color:green">Folders are ready for comparison.</p>
          `;
        } else {
          status.innerHTML = `
            <p style="color:red">Could not find at least two release folders.</p>
            <p>Please download the UMLS Metathesaurus Full Subset for the two latest releases and copy the complete contents after unzipping into the <code>releases</code> folder.</p>
          `;
        }
      } catch (err) {
        status.innerHTML = `<p style="color:red">Error checking releases: ${err.message}</p>`;
      }
    }
    checkReleases();
  </script>
</body>
</html>
